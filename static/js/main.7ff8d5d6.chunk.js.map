{"version":3,"sources":["utils/helpers.js","components/field.js","components/App.js","serviceWorker.js","index.js"],"names":["rotate90","matrix","reversed","i","row","j","push","match","arr","a","b","x","y","Field","props","gameOver","isWin","bestFromStorage","JSON","parse","localStorage","getItem","cells","latest","latestCoordinates","score","allCells","map","item","react_default","createElement","className","key","Fragment","initNewField","App","state","size","checkStep","moved","newMatrix","forEach","newRow","length","_this","setState","stringify","restart","makeRandomCell","this","cells1","swipedir","startX","startY","distX","distY","startTime","el","document","querySelector","addEventListener","handleKeyDown","bind","e","preventDefault","touchobj","changedTouches","pageX","pageY","Date","getTime","Math","abs","newState","moveUp","moveRight","moveDown","moveLeft","finishScore","newData","slice","indexOf","splice","addToStorage","isGameOver","setBestScore","data","rt","availableCells","randomNumber","floor","random","avCells","areMatches","event","keyCode","result","ifGamesOver","field","onClick","Component","Boolean","window","location","hostname","ReactDOM","render","components_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.7ff8d5d6.chunk.js","sourcesContent":["export const addToStorage = (item, key) => {\n  const data = localStorage[key] ? JSON.parse(localStorage[key]) : [];\n  let newData = data.slice();\n  if (item) {\n    if (newData.indexOf(item) === -1) {\n      newData.splice(0,1,item);\n    }\n    localStorage[key] = JSON.stringify(newData);\n  }\n};\nexport const reverseY = matrix => {\n  let reversed = [];\n  for (let i = 0; i < 4; i++) {\n    let row = [];\n    for (let j = 0; j < 4; j++) {\n      row.push(matrix[3 - i][j]);\n    }\n    reversed.push(row);\n  }\n  return reversed;\n};\nexport const rotate90 = matrix => {\n  let reversed = [];\n  for (let i = 0; i < 4; i++) {\n    let row = [];\n    for (let j = 0; j < 4; j++) {\n      row.push(matrix[3 - j][i]);\n    }\n    reversed.push(row);\n  }\n  return reversed;\n};\nexport const match = (arr, a, b, x, y) => {\n  return arr[a] && arr[a][b] && arr[a][b] === arr[x][y];\n};\n","import React from \"react\";\n\nconst Field = props => {\n  let gameOver = props.props.gameOver;\n  let isWin = false;\n  let bestFromStorage = JSON.parse(localStorage.getItem(\"score\"));\n  const initNewField = () => {\n    let cells = props.props.cells;\n    let latest = props.props.latestCoordinates;\n    let score = props.props.score;\n    let allCells = cells.map((item, x) => {\n      return item.map((i, y) => {\n        if (i === 2048) {\n          isWin = true;\n        }\n        return (\n          <div className=\"cell-wrapper\" key={\"wrap-\" + x + y + i}>\n            <div\n              className={\n                \"cell \" +\n                (latest && x === latest.i && y === latest.j ? \" new\" : \"\") +\n                \" cell_\" +\n                i\n              }\n            >\n              {i ? i : \"\"}{\" \"}\n            </div>\n          </div>\n        );\n      });\n    });\n    return (\n      <>\n        <div>\n          <h1 className=\"welcome\">Welcome on board!</h1>\n          <h3 className=\"score\">Your score: {score ? score : 0}</h3>\n          <h3 className=\"best-score score\">\n            Best score: {bestFromStorage ? bestFromStorage : 0}{\" \"}\n          </h3>\n        </div>\n        <div className=\"field\">\n          {allCells}{\" \"}\n          {isWin ? (\n            <div className=\"loose\">\n              <h1>You win!</h1>\n            </div>\n          ) : (\n            \"\"\n          )}{\" \"}\n          {gameOver ? (\n            <div className=\"loose\">\n              <h1>You loose</h1>\n            </div>\n          ) : (\n            \"\"\n          )}\n        </div>\n      </>\n    );\n  };\n  return initNewField();\n};\nexport default Field;\n","import React, { Component } from \"react\";\nimport { addToStorage, rotate90, match } from \"../utils/helpers.js\";\nimport Field from \"./field.js\";\nclass App extends Component {\n  state = {\n    cells: [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]],\n    latestCoordinates: {},\n    gameOver: false,\n    score: 0\n  };\n  size = 4;\n\n  componentDidMount() {\n    let { cells } = this.state;\n    let cells1 = this.makeRandomCell(cells);\n\n    this.setState(this.makeRandomCell(cells1));\n\n    let el = document.querySelector(\".field\"),\n      swipedir,\n      startX,\n      startY,\n      distX,\n      distY,\n      threshold = 150,\n      restraint = 100,\n      elapsedTime,\n      startTime;\n\n    document.addEventListener(\"keydown\", this.handleKeyDown.bind(this));\n    el.addEventListener(\n      \"touchstart\",\n      function(e) {\n        e.preventDefault();\n        let touchobj = e.changedTouches[0];\n        swipedir = \"none\";\n        startX = touchobj.pageX;\n        startY = touchobj.pageY;\n        startTime = new Date().getTime();\n      },\n      false\n    );\n\n    el.addEventListener(\n      \"touchend\",\n      function(e) {\n        e.preventDefault();\n        let touchobj = e.changedTouches[0];\n        distX = touchobj.pageX - startX;\n        distY = touchobj.pageY - startY;\n        elapsedTime = new Date().getTime() - startTime;\n        if (elapsedTime) {\n          if (Math.abs(distX) >= threshold && Math.abs(distY) <= restraint) {\n            swipedir = distX < 0 ? \"left\" : \"right\";\n          } else if (\n            Math.abs(distY) >= threshold &&\n            Math.abs(distX) <= restraint\n          ) {\n            swipedir = distY < 0 ? \"up\" : \"down\";\n          }\n        }\n        if (swipedir === \"up\") {\n          let newState = this.moveUp(this.state.cells);\n          this.setState(newState);\n        } else if (swipedir === \"right\") {\n          let newState = this.moveRight(this.state.cells);\n          this.setState({ cells: newState });\n        } else if (swipedir === \"down\") {\n          let newState = this.moveDown(this.state.cells);\n          this.setState({ cells: newState });\n        } else if (swipedir === \"left\") {\n          let newState = this.moveLeft(this.state.cells);\n          this.setState({ cells: newState });\n        }\n      }.bind(this),\n      false\n    );\n  }\n  setBestScore() {\n    let finishScore = this.state.score;\n    let bestFromStorage = JSON.parse(localStorage.getItem(\"score\"));\n    if (finishScore > bestFromStorage) {\n      addToStorage(finishScore, \"score\");\n    }\n  }\n  ifGamesOver(arr) {\n    if (this.isGameOver(arr)) {\n      this.setBestScore();\n      this.setState({ gameOver: true });\n    }\n  }\n  makeRandomCell(data) {\n    let arr = data.slice();\n    let rt = this.availableCells(arr);\n    if (this.availableCells(arr).length) {\n      let randomNumber = Math.floor(Math.random() * rt.length);\n      arr[rt[randomNumber].i][rt[randomNumber].j] = Math.random() < 0.9 ? 2 : 4;\n      this.setState({\n        latestCoordinates: { i: rt[randomNumber].i, j: rt[randomNumber].j }\n      });\n    }\n    return arr;\n  }\n  availableCells(data) {\n    let avCells = [];\n    let cells = data;\n\n    if (cells.length) {\n      for (let i = 0; i < this.size; i++) {\n        for (let j = 0; j < this.size; j++) {\n          if (cells[i][j] === 0) {\n            avCells.push({ i, j });\n          }\n        }\n      }\n    }\n    return avCells;\n  }\n  areMatches(arr) {\n    let cells = arr.slice();\n    for (let i = 0; i < this.size; i++) {\n      for (let j = 0; j < this.size; j++) {\n        return (\n          match(cells, i - 1, j, i, j) ||\n          match(cells, i, j - 1, i, j) ||\n          match(cells, i, j + 1, i, j) ||\n          match(cells, i + 1, j, i, j)\n        );\n      }\n    }\n  }\n  isGameOver(arr) {\n    return (\n      !this.areMatches(this.state.cells) && !this.availableCells(arr).length\n    );\n  }\n  handleKeyDown(event) {\n    const top = 38;\n    const right = 39;\n    const down = 40;\n    const left = 37;\n    let { cells } = this.state;\n\n    if (event.keyCode === top) {\n      let newState = this.moveUp(cells);\n      this.setState({cells:newState});\n    } else if (event.keyCode === right) {\n      let newState = this.moveRight(cells);\n      this.setState({ cells: newState });\n    } else if (event.keyCode === down) {\n      let newState = this.moveDown(cells);\n      this.setState({ cells: newState });\n    } else if (event.keyCode === left) {\n      let newState = this.moveLeft(cells);\n      this.setState({ cells: newState });\n    }\n  }\n\n  checkStep = (arr, moved) => {\n    let newMatrix =[];\n    arr.forEach(row=>{\n        //user move left -- we are going from left to right\n      let newRow=[];\n        for(let i=0;i<4;i++){\n          if(row[i]!==0){\n            newRow.push(row[i])\n          }\n        }\n        while(newRow.length<4){\n          newRow.push(0)\n        }\n        for(let j=0;j<newRow.length-1;j++){\n          if(newRow[j]===0){\n            newRow[j]=newRow[j+1];\n            newRow[j+1]=0;\n          }else if(newRow[j]===newRow[j+1]){\n            newRow[j]=newRow[j]+newRow[j+1];\n            let score = this.state.score + newRow[j+1];\n            this.setState({ score });\n            newRow[j+1]=0;\n          }\n        }\n        newMatrix.push(newRow)\n      });\n    moved = JSON.stringify(arr)!==JSON.stringify(newMatrix);\n    arr = newMatrix;\n    return { arr, moved};\n  };\n  moveUp(data) {\n    let arr = rotate90(rotate90(rotate90(data.slice())));\n    let moved = false;\n    let result = this.checkStep(arr, moved);\n    arr = rotate90(result.arr);\n    moved = result.moved;\n    this.ifGamesOver(arr);\n    return moved ? this.makeRandomCell(arr) : arr;\n  }\n  moveDown(data) {\n    let arr = rotate90(data.slice());\n    let moved = false;\n    let result = this.checkStep(arr, moved);\n    arr = rotate90(rotate90(rotate90(result.arr)));\n    moved = result.moved;\n    this.ifGamesOver(arr);\n    return moved ? this.makeRandomCell(arr) : arr;\n  }\n  moveLeft(data) {\n    let arr = data.slice();\n    let moved = false;\n    let result = this.checkStep(arr, moved);\n    arr = result.arr;\n    moved = result.moved;\n    this.ifGamesOver(arr);\n    return moved ? this.makeRandomCell(arr) : arr;\n  }\n  moveRight(data) {\n    let arr = rotate90(rotate90(data.slice()));\n    let moved = false;\n    let result = this.checkStep(arr, moved);\n    arr = rotate90(rotate90(result.arr));\n    moved = result.moved;\n    this.ifGamesOver(arr);\n    return moved ? this.makeRandomCell(arr) : arr;\n  }\n\n  restart = () => {\n    let cells = [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]];\n    let allCells = this.makeRandomCell(this.makeRandomCell(cells));\n\n    this.setState({\n      cells: allCells,\n      latestCoordinates: {},\n      gameOver: false,\n      score: 0\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Field props={this.state} />\n        <div className=\"button-wrapper\">\n          <button onClick={this.restart}>New Game</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}